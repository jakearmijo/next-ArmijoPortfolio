{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jake/CodingCentral/next-ArmijoPortfolio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jake/CodingCentral/next-ArmijoPortfolio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/jake/CodingCentral/next-ArmijoPortfolio/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport fs from 'fs';\nimport path from 'path';\nimport matter from 'gray-matter';\nimport remark from 'remark';\nimport html from 'remark-html';\n\nvar ensureString = function ensureString(string) {\n  return string ? \"\".concat(string) : '';\n};\n\nvar ensureNumeric = function ensureNumeric(string) {\n  return Number(ensureString(string).replace(/[^0-9.]/gi, ''));\n};\n\nvar ensureArray = function ensureArray() {\n  var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return !array ? [] : Array.isArray(array) ? array : [array];\n};\n\nvar ensureObject = function ensureObject(object) {\n  return object || {};\n}; // POST.JS\n\n\nvar postsDirectory = path.join(process.cwd(), 'blogposts');\n\nfunction getSortedPostsData() {\n  // Get file names under /posts\n  var fileNames = fs.readdirSync(postsDirectory);\n  var allPostsData = ensureArray(fileNames.map(function (fileName) {\n    // Remove \".md\" from file name to get id\n    var id = fileName.replace(/\\.md$/, ''); // Read markdown file as string\n\n    var fullPath = path.join(postsDirectory, fileName);\n    var fileContents = fs.readFileSync(fullPath, 'utf8'); // Use gray-matter to parse the post metadata section\n\n    var matterResult = matter(fileContents); // Combine the data with the id\n\n    return _objectSpread({\n      id: id\n    }, matterResult.data);\n  })); // Sort posts by date\n\n  return allPostsData.sort(function (a, b) {\n    if (a.date < b.date) {\n      return 1;\n    } else {\n      return -1;\n    }\n  });\n}\n\nfunction getAllPostIds() {\n  var fileNames = fs.readdirSync(postsDirectory); // Returns an array that looks like this:\n  // [\n  //   {\n  //     params: {\n  //       id: 'ssg-ssr'\n  //     }\n  //   },\n  //   {\n  //     params: {\n  //       id: 'pre-rendering'\n  //     }\n  //   }\n  // ]\n\n  return fileNames.map(function (fileName) {\n    return {\n      params: {\n        id: fileName.replace(/\\.md$/, '')\n      }\n    };\n  });\n}\n\nfunction getPostData(_x) {\n  return _getPostData.apply(this, arguments);\n}\n\nfunction _getPostData() {\n  _getPostData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n    var fullPath, fileContents, matterResult, processedContent, contentHtml;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            fullPath = path.join(postsDirectory, \"\".concat(id, \".md\"));\n            fileContents = fs.readFileSync(fullPath, 'utf8'); // Use gray-matter to parse the post metadata section\n\n            matterResult = matter(fileContents); // Use remark to convert markdown into HTML string\n\n            _context.next = 5;\n            return remark().use(html).process(matterResult.content);\n\n          case 5:\n            processedContent = _context.sent;\n            contentHtml = processedContent.toString(); // Combine the data with the id and contentHtml\n\n            return _context.abrupt(\"return\", _objectSpread({\n              id: id,\n              contentHtml: contentHtml\n            }, matterResult.data));\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getPostData.apply(this, arguments);\n}\n\nexport { ensureString, ensureNumeric, ensureArray, ensureObject, getSortedPostsData, getAllPostIds, getPostData };","map":{"version":3,"sources":["/Users/jake/CodingCentral/next-ArmijoPortfolio/lib/utils/index.js"],"names":["fs","path","matter","remark","html","ensureString","string","concat","ensureNumeric","Number","replace","ensureArray","array","arguments","length","undefined","Array","isArray","ensureObject","object","postsDirectory","join","process","cwd","getSortedPostsData","fileNames","readdirSync","allPostsData","map","fileName","id","fullPath","fileContents","readFileSync","matterResult","data","sort","a","b","date","getAllPostIds","params","getPostData","use","content","processedContent","contentHtml","toString"],"mappings":"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","sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport matter from 'gray-matter'\nimport remark from 'remark'\nimport html from 'remark-html'\n\nvar ensureString = function ensureString(string) {\n    return string ? \"\".concat(string) : '';\n  }; \nvar ensureNumeric = function ensureNumeric(string) {\nreturn Number(ensureString(string).replace(/[^0-9.]/gi, ''));\n};\nvar ensureArray = function ensureArray() {\nvar array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\nreturn !array ? [] : Array.isArray(array) ? array : [array];\n};\nvar ensureObject = function ensureObject(object) {\nreturn object || {};\n};\n\n// POST.JS\nconst postsDirectory = path.join(process.cwd(), 'blogposts')\n\nfunction getSortedPostsData() {\n  // Get file names under /posts\n  const fileNames = fs.readdirSync(postsDirectory)\n  const allPostsData = ensureArray(fileNames.map(fileName => {\n    // Remove \".md\" from file name to get id\n    const id = fileName.replace(/\\.md$/, '')\n\n    // Read markdown file as string\n    const fullPath = path.join(postsDirectory, fileName)\n    const fileContents = fs.readFileSync(fullPath, 'utf8')\n\n    // Use gray-matter to parse the post metadata section\n    const matterResult = matter(fileContents)\n\n    // Combine the data with the id\n    return {\n      id,\n      ...matterResult.data\n    }\n  }))\n  // Sort posts by date\n  return allPostsData.sort((a, b) => {\n    if (a.date < b.date) {\n      return 1\n    } else {\n      return -1\n    }\n  })\n}\n\nfunction getAllPostIds() {\n  const fileNames = fs.readdirSync(postsDirectory)\n\n  // Returns an array that looks like this:\n  // [\n  //   {\n  //     params: {\n  //       id: 'ssg-ssr'\n  //     }\n  //   },\n  //   {\n  //     params: {\n  //       id: 'pre-rendering'\n  //     }\n  //   }\n  // ]\n  return fileNames.map(fileName => {\n    return {\n      params: {\n        id: fileName.replace(/\\.md$/, '')\n      }\n    }\n  })\n}\n\nasync function getPostData(id) {\n  const fullPath = path.join(postsDirectory, `${id}.md`)\n  const fileContents = fs.readFileSync(fullPath, 'utf8')\n\n  // Use gray-matter to parse the post metadata section\n  const matterResult = matter(fileContents)\n\n  // Use remark to convert markdown into HTML string\n  const processedContent = await remark()\n    .use(html)\n    .process(matterResult.content)\n  const contentHtml = processedContent.toString()\n\n  // Combine the data with the id and contentHtml\n  return {\n    id,\n    contentHtml,\n    ...matterResult.data\n  }\n}\n\nexport {\n    ensureString,\n    ensureNumeric,\n    ensureArray,\n    ensureObject,\n    getSortedPostsData,\n    getAllPostIds,\n    getPostData\n}"]},"metadata":{},"sourceType":"module"}